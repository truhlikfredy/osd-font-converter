language: java
sudo: false

git:
  depth: 10

branches:
  only:
    - develop
    - master

tags:
  enabled: false

script:
 - mvn clean compile assembly:single
 - mkdir -p target/osd-font-converter-preview
 - java -jar ./target/osd-font-converter-jar-with-dependencies.jar -l=INFO -a -d -u=./target/osd-font-converter-preview
 - cd target
 - ls -la osd-font-converter-preview
 - zip -r osd-font-converter-preview.zip osd-font-converter-preview
 - cd ..
 - if [ "$TRAVIS_BRANCH" == "master" ]; then cp .travis.maven.settings.xml $HOME/.m2/settings.xml && mvn github-release:release; fi
